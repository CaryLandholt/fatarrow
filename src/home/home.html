<routes></routes>

<div class="container">
	<div class="jumbotron">
		<img src="https://prerender.io/img/angularjs.jpg" width="500" />
		<h1>Reference Architecture</h1>
		<p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet.</p>
	</div>

	<div class="row" ng-repeat="script in controller.scripts | filter:'/home/'">
		<div class="panel panel-primary">
			<div class="panel-heading">
				<h3 class="panel-title">{{script | toExtension:''}}</h3>
			</div>
			<div class="panel-body">
				<div class="col-md-6">
					<syntax src="{{script | toExtension:'.coffee'}}"></syntax>
				</div>

				<div class="col-md-6">
					<syntax src="{{script}}"></syntax>
				</div>
			</div>
		</div>
	</div>

	<div class="row" ng-init="script = '/home/home.html'">
		<div class="panel panel-primary">
			<div class="panel-heading">
				<h3 class="panel-title">{{script}}</h3>
			</div>
			<div class="panel-body">
				<div class="col-md-12">
					<syntax src="{{script}}"></syntax>
				</div>
			</div>
		</div>
	</div>






	<div class="row">
		<div class="col-md-12">
			<blockquote>
				<p>Even though the backend is being mocked, pass requests through to osrc.dfm.io</p>
			</blockquote>
		</div>

		<div class="col-md-6">
<syntax>
# reportCard.backend.coffee
class ReportCardBackend extends Run
	constructor: ($httpBackend) ->
		$httpBackend.whenGET(/osrc.dfm.io/).passThrough()
</syntax>
		</div>
		<div class="col-md-6">
<syntax>
// reportCard.backend.js
(function() {
  var ReportCardBackend;

  ReportCardBackend = (function() {
    function ReportCardBackend($httpBackend) {
      $httpBackend.whenGET(/osrc.dfm.io/).passThrough();
    }

    return ReportCardBackend;

  })();

  angular.module('app').run(['$httpBackend', ReportCardBackend]);

}).call(this);

/*
//# sourceMappingURL=reportCard.backend.js.map
*/
</syntax>
		</div>
	</div>

	<div class="row">
		<div class="panel panel-primary">
			<div class="panel-heading">
				<h3 class="panel-title">reportCardController</h3>
			</div>
			<div class="panel-body">
				<div class="col-md-6">
<!-- <ng:include src="'/reportCard/reportCardController.coffee'"></ng:include> -->

<syntax src="/home/homeController.coffee"></syntax>
<syntax src="/reportCard/reportCardController.coffee"></syntax>
<syntax src="/reportCard/reportCardController.js"></syntax>
<syntax src="/index.html"></syntax>

<syntax>
class ReportCard extends Controller
	constructor: (reportCardService) ->
		@getReportCard = (username) ->
			reportCardService.get(username).then (results) =>
				@reportCard = results
</syntax>
		</div>

		<div class="col-md-6">
<syntax>
(function() {
  var ReportCard;

  ReportCard = (function() {
    function ReportCard(reportCardService) {
      this.getReportCard = function(username) {
        return reportCardService.get(username).then((function(_this) {
          return function(results) {
            return _this.reportCard = results;
          };
        })(this));
      };
    }

    return ReportCard;

  })();

  angular.module('app').controller('reportCardController', ['reportCardService', ReportCard]);

}).call(this);

/*
//# sourceMappingURL=reportCardController.js.map
*/
</syntax>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-6">
<syntax>
# ReportCardInterceptor.coffee
class ReportCardInterceptor extends Factory
	constructor: ->
		return {
			response: (response) ->
				url = response.config.url
				isMatch = !!url.match(/osrc.dfm.io/)

				if isMatch
					gravatar = response.data.gravatar
					response.data.gravatar = "https://secure.gravatar.com/avatar/#{gravatar}?s=220&d=https://a248.e.akamai.net/assets.github.com/images/gravatars/gravatar-user-420.png"

				response
		}
</syntax>
		</div>
		<div class="col-md-6">
<syntax>
// ReportCardInterceptor.js
(function() {
  var ReportCardInterceptor;

  ReportCardInterceptor = (function() {
    function ReportCardInterceptor() {
      return {
        response: function(response) {
          var gravatar, isMatch, url;
          url = response.config.url;
          isMatch = !!url.match(/osrc.dfm.io/);
          if (isMatch) {
            gravatar = response.data.gravatar;
            response.data.gravatar = "https://secure.gravatar.com/avatar/" + gravatar + "?s=220&d=https://a248.e.akamai.net/assets.github.com/images/gravatars/gravatar-user-420.png";
          }
          return response;
        }
      };
    }

    return ReportCardInterceptor;

  })();

  angular.module('app').factory('ReportCardInterceptor', [ReportCardInterceptor]);

}).call(this);

/*
//# sourceMappingURL=ReportCardInterceptor.js.map
*/
</syntax>
		</div>
	</div>

	<div class="row">
		<div class="col-md-6">
<syntax>
# reportCardInterceptorConfig.coffee
class ReportCardInterceptorConfig extends Config
	constructor: ($httpProvider) ->
		$httpProvider.interceptors.push 'ReportCardInterceptor'
</syntax>
		</div>
		<div class="col-md-6">
<syntax>
// reportCardInterceptorConfig.js
(function() {
  var ReportCardInterceptorConfig;

  ReportCardInterceptorConfig = (function() {
    function ReportCardInterceptorConfig($httpProvider) {
      $httpProvider.interceptors.push('ReportCardInterceptor');
    }

    return ReportCardInterceptorConfig;

  })();

  angular.module('app').config(['$httpProvider', ReportCardInterceptorConfig]);

}).call(this);

/*
//# sourceMappingURL=reportCardInterceptorConfig.js.map
*/
</syntax>
		</div>
	</div>

	<div class="row">
		<div class="col-md-6">
<syntax>
# reportCardRoutes.coffee
class ReportCardRoutes extends Config
	constructor: ($routeProvider) ->
		$routeProvider
		.when '/reportcard',
			caption: 'Your Open Source Report Card'
			controller: 'reportCardController'
			controllerAs: 'controller'
			templateUrl: '/reportCard/report-card.html'
</syntax>
		</div>
		<div class="col-md-6">
<syntax>
// reportCardRoutes.js
(function() {
  var ReportCardRoutes;

  ReportCardRoutes = (function() {
    function ReportCardRoutes($routeProvider) {
      $routeProvider.when('/reportcard', {
        caption: 'Your Open Source Report Card',
        controller: 'reportCardController',
        controllerAs: 'controller',
        templateUrl: '/reportCard/report-card.html'
      });
    }

    return ReportCardRoutes;

  })();

  angular.module('app').config(['$routeProvider', ReportCardRoutes]);

}).call(this);

/*
//# sourceMappingURL=reportCardRoutes.js.map
*/
</syntax>
		</div>
	</div>

	<div class="row">
		<div class="col-md-6">
<syntax>
# reportCardService.coffee
class ReportCard extends Service
	constructor: (@$http) ->

	get: (username) =>
		@$http.get "http://osrc.dfm.io/#{username}.json"
		.then (results) ->
			results.data
</syntax>
		</div>

		<div class="col-md-6">
<syntax>
// reportCardService.js
(function() {
  var ReportCard,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  ReportCard = (function() {
    function ReportCard($http) {
      this.$http = $http;
      this.get = __bind(this.get, this);
    }

    ReportCard.prototype.get = function(username) {
      return this.$http.get("http://osrc.dfm.io/" + username + ".json").then(function(results) {
        return results.data;
      });
    };

    return ReportCard;

  })();

  angular.module('app').service('reportCardService', ['$http', ReportCard]);

}).call(this);

/*
//# sourceMappingURL=reportCardService.js.map
*/
</syntax>
		</div>
	</div>

	<div class="row">
		<div class="col-md-6">
<syntax>
# stripUsername.coffee
class StripUsername extends Filter
	constructor: ->
		return (repo, username) ->
			startsWithUsername = repo.toLowerCase().indexOf(username.toLowerCase()) is 0

			return repo if not startsWithUsername

			strippedRepo = repo.substr username.length + 1
</syntax>
		</div>

		<div class="col-md-6">
<syntax>
// stripUsername.js
(function() {
  var StripUsername;

  StripUsername = (function() {
    function StripUsername() {
      return function(repo, username) {
        var startsWithUsername, strippedRepo;
        startsWithUsername = repo.toLowerCase().indexOf(username.toLowerCase()) === 0;
        if (!startsWithUsername) {
          return repo;
        }
        return strippedRepo = repo.substr(username.length + 1);
      };
    }

    return StripUsername;

  })();

  angular.module('app').filter('stripUsername', [StripUsername]);

}).call(this);

/*
//# sourceMappingURL=stripUsername.js.map
*/
</syntax>
		</div>
	</div>

</div>